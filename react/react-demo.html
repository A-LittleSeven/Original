<!DOCTYPE html>
<html>
  <head>
    <script src="../react/build/react.js"></script>
    <script src="../react/build/react-dom.js"></script>
    <script src="../react/build/browser.min.js"></script>
  </head>
  <body>
    <!-- example Hello World -->
    <div id="example"></div>
    <script type="text/babel">
        ReactDOM.render(
        <h1>Hello, world!</h1>,
        document.getElementById('example')
        );
    </script>

    <!-- 在JSX中使用表达式 -->
    <div id="root"></div>
    <script type="text/babel">
        function formatName(user) {
            return user.firstName + '-' + user.lastName;
        }
        
        function getGreeting(user) {
            if (user) {
                return <h1>Hello, {formatName(user)}!</h1>;
            }
            return <h1>Hello, Stranger.</h1>;
        }
        
        const user = {
            firstName: 'Harper',
            lastName: 'Perez'
        };

        const element = (
            <h1>
                Hello {formatName(user)}!
            </h1>
        );

        const element1 = (
            <div>
                <h1>Hello!</h1>
                <h2>Good to see you here.</h2>
            </div>
        );

        ReactDOM.render(
            element1,
            document.getElementById('root')
        );
    </script>

    <!-- 更新元素渲染 -->
    <div id="update-dom"></div>
    <script type="text/babel">
        function tick() {
            const element = (
                <div>
                    <h1>Hello, World!</h1>
                    <h2>It is {new Date().toLocaleTimeString()}.</h2>
                </div>
            );

            ReactDOM.render(
                element,
                document.getElementById('update-dom')
            );
        }

        setInterval(tick, 1000);
    </script>

    <!-- 组件渲染 -->
    <div id="render-dom"></div>
    <script type="text/babel">
        function Welcome(props) {
            return <h1>Hello, {props.name}</h1>;
        }

        function App() {
            return (
                <div>
                    <Welcome name="Sara" />
                    <Welcome name="Lixxxxx" />
                    <Welcome name="Wsxxxxxx" />
                </div>
            );
        }

        // const element = <Welcome name="Sara" />;
        ReactDOM.render(
            <App />,
            document.getElementById('render-dom')
        );
    </script>

    <div id="extract-component"></div>
    <script type="text/babel">
        function formatDate(date) {
            return date.toLocaleDateString();
        }

        function Avatar(props) {
            return (
                <img className="Avatar"
                     src={props.user.avatarUrl}
                     alt={props.user.name} />
            );
        }

        function UserInfo(props) {
            return (
                <div className="UserInfo">
                    <Avatar user={props.user} />
                    <div className="UserInfo-name">
                        {props.user.name}
                    </div>
                </div>
            );
        }

        function Comment(props) {
            return (
                <div className="Comment">
                    <UserInfo user={props.author} />
                    <div className="Comment-text">
                        {props.text}
                    </div>
                    <div className="Comment-date">
                        {formatDate(props.date)}
                    </div>
                </div>
            );
        }

        const comment = {
            date: new Date(),
            text: 'I hope me enjoy learning React!',
            author: {
                name: 'Lixxxx',
                avatarUrl: 'http://placekitten.com/g/64/64',
            }
        };

        ReactDOM.render(
            <Comment 
                date={comment.date}
                text={comment.text}
                author={comment.author}
            />,
            document.getElementById('extract-component')
        );
    </script>

    <div id="test"></div>
    <script type="text/babel">
        class Clock extends React.Component {
            constructor(props) {
                super(props);
                this.state = {date: new Date()};
            }
            
            componentDidMount() {
                this.timerID = setInterval(
                    () => this.tick(),
                    1000
                );
            }

            componentWillUnmount() {
                clearInterval(this.timerID);
            }
            
            tick() {
                this.setState({
                    date: new Date()
                });
            }

            render() {
                return (
                    <div>
                        <h1>this is a clock component!</h1>
                        <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
                    </div>
                );
            };
        }
        
        ReactDOM.render(
            <Clock />,
            document.getElementById('test')
        );
    </script>
  </body>
</html>
