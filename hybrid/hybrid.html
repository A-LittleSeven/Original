<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hybrid-Example</title>
    <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.0/normalize.css">
    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src='http://apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js'></script>
    <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/todc-bootstrap/3.1.1-3.2.1/todc-bootstrap.min.css">
</head>
<style>
    .row {
        text-align: center;
    }

    p {
        margin-top: 10px;
        margin-left: 10px;
        margin-bottom: 0;
        margin-right: 0;
    }

    h1, h2, h3 {
        margin-top: 10px;
        margin-left: 10px;
        margin-bottom: 0;
        margin-right: 0;
    }

    .btn {
        margin-top: 5px;
        margin-left: 0;
        width: 90%;
    }
</style>
<body>
    <div class="container">
        <h1>鲁能JS-API</h1>
        <h2>基础接口</h2>
        <div class="row">
            <div class="col-xs-12 col-md-8">
                <h3>检测JSBridge</h3>
                <p>原生函数: 无</p>
                <button type="button" class="btn btn-danger btn-lg btn-block ready center-block">HYBridApi Ready</button>
            </div>
        </div>
    
        <div class="row">
            <h3>分享至朋友圈</h3>
            <p>原生函数: shareToTimeline, 参数JSONObject, 返回值JSONObject</p>
            <button type="button" class="btn btn-success btn-lg btn-block share">ShareToTimeline</button>
        </div>

        <div class="row">
            <h3>分享给微信好友</h3>
            <p>原生函数: shareToFriend, 参数JSONObject, 返回值JSONObject</p>
            <button type="button" class="btn btn-success btn-lg btn-block share">ShareToFriend</button>
        </div>

        <div class="row">
            <h3>分享至新浪微博</h3>
            <p>原生函数: shareToSinaWeibo, 参数JSONObject, 返回值JSONObject</p>
            <button type="button" class="btn btn-success btn-lg btn-block share">ShareToSinaWeibo</button>
        </div>

        <div class="row">
            <h3>分享至QQ好友</h3>
            <p>原生函数: shareToQQ, 参数JSONObject, 返回值JSONObject</p>
            <button type="button" class="btn btn-success btn-lg btn-block share">ShareToQQ</button>
        </div>

        <div class="row">
            <h3>分享至QQ空间</h3>
            <p>原生函数: shareToQZone, 参数JSONObject, 返回值JSONObject</p>
            <button type="button" class="btn btn-success btn-lg btn-block share">ShareToQZone</button>
        </div>
        
        <h2>图片接口</h2>
        <div class="row">
            <h3>选择图片</h3>
            <p>原生函数: chooseImage, 参数无, 返回值无</p>
            <button type="button" class="btn btn-info btn-lg btn-block choose">ChooseImage</button>
        </div>
    
        <div class="row">
            <h3>浏览图片</h3>
            <p>原生函数: previewImage, 参数JSONObject, 返回值无</p>
            <button type="button" class="btn btn-info btn-lg btn-block preview">PreviewImage</button>
        </div>
    
        <div class="row">
            <h3>上传图片</h3>
            <p>原生函数: uploadImage, 参数JSONObject, 返回值无</p>
            <button type="button" class="btn btn-info btn-lg btn-block uploadImg">UploadImage</button>
        </div>
        
        <h2>网络状态及地理位置接口</h2>
        <div class="row">
            <h3>获取网络状态</h3>
            <p>原生函数: getNetworkType, 参数无, 返回值JSONObject</p>
            <button type="button" class="btn btn-success btn-lg btn-block network">GetNetworkType</button>
        </div>
    
        <div class="row">
            <h3>获取地理位置</h3>
            <p>原生函数: getLocation, 参数无, 返回值JSONObject</p>
            <button type="button" class="btn btn-success btn-lg btn-block location">GetLocation</button>
        </div>
        
        <h2>界面操作接口</h2>
        <div class="row">
            <h3>关闭当前网页窗口</h3>
            <p>原生函数:closeWindow</p>
            <button type="button" class="btn btn-info btn-lg btn-block close">CloseWindow</button>
        </div>
    
        <div class="row">
            <h3>接管返回按钮</h3>
            <p>原生函数:takeOverBackBtn</p>
            <p><a href="./navitest.html">返回测试页面</a></p>
            <button type="button" class="btn btn-info btn-lg btn-block backBtn">Take Over Back Btn</button>
        </div>
        
        <h2>扫一扫接口</h2>
        <div class="row">
            <h3>直接返回二维码扫描结果</h3>
            <p>原生函数:scanQRCode</p>
            <button type="button" class="btn btn-success btn-lg btn-block qrcode">ScanQRCode</button>
        </div>
        
        <h2>支付接口</h2>
        <div class="row">
            <h3>发起一个微信支付请求</h3>
            <p>原生函数:chooseWXPay</p>
            <button type="button" class="btn btn-info btn-lg btn-block wxpay">ChooseWXPay</button>
        </div>
    
        <div class="row">
            <h3>发起一个支付宝支付请求</h3>
            <p>原生函数:chooseAliPay</p>
            <button type="button" class="btn btn-info btn-lg btn-block alipay">ChooseAliPay</button>
        </div>
    </div>
    
</body>
<script src="./dsBridge.js"></script>
<script src="./hybrid.js"></script>
<script>
    $(document).ready(function () {
        // window.LNJSBridge = function (eventName, params) {
        //     console.log('LNJSBridgeSuccess');
        // }
        // console.log(bridge);
        // var str = bridge.call("testSyn", "testSyn");
        // console.log(str);

        // // bridge.call("testAsyn", "testAsyn", function (v) {
        // //     alert(v);
        // // });

        // bridge.register('addValue', function (l, r) {
        //     return l + r;
        // })
    });

    HYBridApi.ready(function (Api) {
        Api.takeOverBackBtn(false, function (res) {
            console.log(res);
        });
    });

    // ready示例 测试jsbridge
    $('.ready').on('click', function () {
        // HYBridApi.test();
        HYBridApi.ready(function (Api) {
            console.log('now jsbridge is ready');
            Api.test();
        });
    });

    // 分享示例
    $('.share').on('click', function () {
        var shareData = {
        "imgUrl":'http://www.baidufe.com/fe/blog/static/img/weixin-qrcode-2.jpg',
        "link":'http://www.baidufe.com',
        "desc":'大家好，我是Alien，Web前端&Android客户端码农，喜欢技术上的瞎倒腾！欢迎多交流',
        "title":"大家好，我是赵先烈"
        };

        // 分享的回调
        var shareCallbacks = {
            // 分享操作开始之前
            ready:function () {
                console.log('ready func');
                // 你可以在这里对分享的数据进行重组
            },
            // 分享被用户自动取消
            cancel:function () {
                console.log('cancel func');
                // 你可以在你的页面上给用户一个小Tip，为什么要取消呢？
            },
            // 分享失败了
            fail:function () {
                console.log('fail func');
                // 分享失败了，是不是可以告诉用户：不要紧，可能是网络问题，一会儿再试试？
            },
            // 分享成功
            confirm:function () {
                console.log('confirm func');
                // 分享成功了，我们是不是可以做一些分享统计呢？
            },
            // 整个分享过程结束
            all:function () {
                console.log('all func');
                // 如果你做的是一个鼓励用户进行分享的产品，在这里是不是可以给用户一些反馈了？
            }
        };

        HYBridApi.ready(function (Api) {
            Api.shareToTimeline(shareData, shareCallbacks);
        });
    });

    // 选择照片示例
    $('.choose').on('click', function () {
        HYBridApi.ready(function (Api) {
            Api.chooseImage();
        });
    });

    // 图片预览示例
    $('.preview').on('click', function () {
        HYBridApi.ready(function (Api) {
            var curSrc = Api.imgSrcList[0];
            var srcList = Api.imgSrcList;
            Api.previewImage(curSrc, srcList);
        });
    });

    // 图片上传示例
    $('.uploadImg').on('click', function () {
        HYBridApi.ready(function (Api) {

            // 图片上传的回调
            var uploadCallbacks = {
                // 分享操作开始之前
                ready:function () {
                    console.log('ready func');
                },
                
                // 上传图片的进度回调
                continue: function (count) {
                    console.log('已经上传了' + count + '张照片');
                },

                // 上传图片被用户自动取消
                cancel:function () {
                    console.log('cancel func');
                },
                // 上传图片失败了
                fail:function () {
                    console.log('fail func');
                },
                // 上传图片成功
                confirm:function () {
                    console.log('confirm func');
                },
                // 整个上传过程结束
                all:function () {
                    console.log('all func');
                }
            };
            var list = Api.imgSrcList;
            Api.uploadImage(list, uploadCallbacks);
        });
    });

    // 获取网络状态示例
    $('.network').on('click', function () {
        HYBridApi.ready(function (Api) {
            var type = Api.getNetworkType();
            console.log(type);
        });
    });

    // 获取当前地理位置示例
    $('.location').on('click', function () {
        HYBridApi.ready(function (Api) {
            Api.getLocation(function (location) {
                console.log(location.city);
            });
        });
    });

    // 关闭当前网页窗口示例
    $('.close').on('click', function () {
        HYBridApi.ready(function (Api) {
            Api.closeWindow();
        });
    });

    // 接管返回按钮示例
    $('.backBtn').on('click', function () {
        HYBridApi.ready(function (Api) {
            Api.takeOverBackBtn(true, function (res) {
                console.log(res);
            });
        });
    });

    // 二维码扫描结果示例
    $('.qrcode').on('click', function () {
        HYBridApi.ready(function (Api) {
            Api.scanQRCode(function (result) {
                console.log(result);
            });
        });
    });

    // 发起一个微信支付的示例
    $('.wxpay').on('click', function () {
        HYBridApi.ready(function (Api) {

            // 微信支付的回调
            var wxpayCallbacks = {
                // 支付取消回调
                cancel:function () {
                    console.log('cancel func');
                },
                // 支付失败回调
                fail:function () {
                    console.log('fail func');
                },
                // 支付成功回调
                confirm:function () {
                    console.log('confirm func');
                },
                // 整个支付过程结束
                all:function () {
                    console.log('all func');
                }
            };

            var wxpayData = {
                'partnerId': '21',
                'prepayId': '2150',
                'package': 'aSBsb3ZlIHdzeA==',
                'nonceStr': 'd3N4MjE1MA==',
                'timeStamp': 1521615792,
                'sign': 'bGl4IGxvdmUgd3N4Cg==',
            };

            Api.chooseWXPay(wxpayData, wxpayCallbacks);
        });
    });

    // 发起一个支付宝支付的示例
    $('.alipay').on('click', function () {
        HYBridApi.ready(function (Api) {

            // 支付宝支付的回调
            var alipayCallbacks = {
                // 支付取消回调
                cancel:function () {
                    console.log('cancel func');
                },
                // 支付失败回调
                fail:function () {
                    console.log('fail func');
                },
                // 支付成功回调
                confirm:function () {
                    console.log('confirm func');
                },
                // 整个支付过程结束
                all:function () {
                    console.log('all func');
                }
            };

            var alipayData = {
                'orderStr': 'bGl4IGxvdmUgd3N4Cg==',
            };

            Api.chooseAliPay(alipayData, alipayCallbacks);
        });
    });
    
</script>
</html>
